{% extends "admin/base.html" %}
{% block content %}
<div class="container my-4">
    <h3>Seller KYC - {{ seller.first_name }} {{ seller.last_name }}</h3>

    <div class="row mt-3">
        <div class="col-md-6">
            <p><strong>Seller ID:</strong> {{ seller.id }}</p>
            <p><strong>Full Name:</strong> {{ seller.first_name }} {{ seller.last_name }}</p>
            <p><strong>Email:</strong> {{ seller.email }}</p>
            <p><strong>Phone:</strong> {{ seller.phone_number }}</p>
        </div>
        <div class="col-md-6">
           <p><strong>Documents:</strong></p>
{% for doc in documents %}
    {% if doc.file_path.startswith('http') %}
        <!-- Cloudinary / external URL -->
        <a href="{{ doc.file_path }}" target="_blank">
            <img src="{{ doc.file_path }}" class="img-fluid mb-2" style="max-width:150px; height:auto;">
        </a>
    {% else %}
        <!-- Local static file -->
        <a href="{{ url_for('static', filename=doc.file_path) }}" target="_blank">
            <img src="{{ url_for('static', filename=doc.file_path) }}" class="img-fluid mb-2" style="max-width:150px; height:auto;">
        </a>
    {% endif %}
{% endfor %}

        </div>
    </div>

    <div class="mt-3">
        {% if documents[0].status == 'pending' %}
        <form action="{{ url_for('admin.seller_kyc_action', user_id=seller.id, action='approve') }}" method="post" class="d-inline">
            <button type="submit" class="btn btn-success">✔ Approve</button>
        </form>
        <form action="{{ url_for('admin.seller_kyc_action', user_id=seller.id, action='reject') }}" method="post" class="d-inline">
            <button type="submit" class="btn btn-danger">❌ Reject</button>
        </form>
        {% else %}
            <p class="text-muted">This request has already been {{ documents[0].status }}.</p>
        {% endif %}
        <a href="{{ url_for('admin.seller_kyc_list') }}" class="btn btn-secondary">← Back to list</a>
    </div>
</div>
{% endblock %}
