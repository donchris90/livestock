<div class="modal-header">
  <h5 class="modal-title">{{ logistic.first_name }} {{ logistic.last_name }}</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">

  <!-- Header Info -->
  <div class="d-flex align-items-center mb-3 gap-3">
    {% if logistic.profile_photo %}
      <img src="{{ url_for('static', filename=logistic.profile_photo) }}" alt="Profile Photo" class="rounded-circle" width="80" height="80" style="object-fit: cover;">
    {% else %}
      <img src="{{ url_for('static', filename='default_profile.png') }}" alt="Profile Photo" class="rounded-circle" width="80" height="80" style="object-fit: cover;">
    {% endif %}
    <div>
      <h6 class="mb-0 d-flex align-items-center">
        {{ logistic.first_name }} {{ logistic.last_name }}
        {% if logistic.kyc_status == 'approved' %}
          <span class="ms-2 text-success" title="Verified">✔</span>
        {% endif %}
      </h6>
      <small class="badge {% if logistic.kyc.status=='approved' %}bg-success{% else %}bg-secondary{% endif %}">
        {% if logistic.kyc.status=='approved' %}Verified{% else %}Unverified{% endif %}
      </small>
      <p class="mb-0"><strong>Company:</strong> {{ logistic.company_name or '-' }}</p>
      <p class="mb-0"><strong>Location:</strong> {{ logistic.street }}, {{ logistic.city }}, {{ logistic.state }}</p>
      <p class="mb-0"><strong>Email:</strong> {{ logistic.email }}</p>
      <p class="mb-0"><strong>Phone:</strong> {{ logistic.phone }}</p>
      <p class="mb-0"><span class="badge bg-warning text-dark">⭐ {{ average_rating }} ({{ total_reviews }} reviews)</span></p>
    </div>
  </div>

  <!-- Reviews -->
  {% if total_reviews > 0 %}
    <hr>
    <div>
      <h6>Positive Reviews</h6>
      {% for review in positive_reviews %}
        <div class="p-2 mb-1 bg-light rounded">
          <div class="d-flex justify-content-between">
            <strong>{{ review.reviewer.first_name }}</strong>
            <small class="text-muted">{{ review.created_at.strftime('%d %b, %Y') }}</small>
          </div>
          <div class="text-warning">
            {% for _ in range(review.rating) %}★{% endfor %}
            {% for _ in range(5 - review.rating) %}☆{% endfor %}
          </div>
          <p class="mb-0">{{ review.comment }}</p>
        </div>
      {% else %}
        <p class="text-muted">No positive reviews yet.</p>
      {% endfor %}

      <h6 class="mt-3 text-danger">Negative Reviews</h6>
      {% for review in negative_reviews %}
        <div class="p-2 mb-1 bg-light rounded">
          <div class="d-flex justify-content-between">
            <strong>{{ review.reviewer.first_name }}</strong>
            <small class="text-muted">{{ review.created_at.strftime('%d %b, %Y') }}</small>
          </div>
          <div class="text-warning">
            {% for _ in range(review.rating) %}★{% endfor %}
            {% for _ in range(5 - review.rating) %}☆{% endfor %}
          </div>
          <p class="mb-0">{{ review.comment }}</p>
        </div>
      {% else %}
        <p class="text-muted">No negative reviews yet.</p>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted">No reviews yet.</p>
  {% endif %}

</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
</div>
